<app-loading-spinner *ngIf="currentUserInfo.token" [isLoading]="isLoading"></app-loading-spinner>
<div *ngIf="currentUserInfo.token; else loggedOut">


  <div *ngIf="!isLoading">
    <button *ngIf="!boolFlagAdd" mat-mini-fab (click)="changeAddFlag(true)" class="addButton">+</button>
    <button *ngIf="boolFlagAdd" mat-raised-button (click)="showModules()" class="addButton">Show modules</button>

    <div *ngIf="!boolFlagAdd">
      <div *ngIf="modules.length > 0; else emptyModules">
        <h4 class="text-primary">Your modules:</h4>
        <mat-card class="centerElement" *ngFor="let module of modules"
                  (click)="showMeasurements(module)">{{module.name}}</mat-card>
      </div>
    </div>
    <div *ngIf="boolFlagAdd">
      <app-add-module (requestFlag)="changeRequestFlag($event)"></app-add-module>
    </div>
    <br>

    <ng-template #emptyModules>
      <app-add-module></app-add-module>
    </ng-template>
    <button mat-button class="btn btn-secondary" (click)="logout()">Logout</button>
  </div>


</div>

<ng-template #loggedOut>
  <h3>Please login.</h3>
</ng-template>
